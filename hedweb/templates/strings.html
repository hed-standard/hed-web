{% extends "layout.html" %}
{% from "schemas-pulldown.html" import create_schemas_pulldown %}
{% from "actions.html" import create_actions %}
{% from "options.html" import create_options %}
{% from "file-input.html" import create_file_input %}
{% from "query.html" import create_query %}
{% from "process-buttons.html" import create_process_buttons %}

{% block content %}
    <h3>HED string quick checks</h3>
    <form id="string_form" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        {{ create_actions(to_long=True,to_short=True,validate=True,search=True) }}
        {{ create_options(check_for_warnings=True) }}

        <div class="card card-body bg-light my-5">
            <label for="string_input" class="form-label">Enter a HED string:</label>
            <textarea class="form-control" rows="5" cols="60" wrap="soft" maxlength="25000"
                      name="string_input" id="string_input"></textarea>
            <div id="definition_section" class="row g-2 mb-2 mt-3">
                <label for="definition_file" class="col-sm-auto col-12 col-form-label form-label-col">Definitions (JSON):</label>
                <div class="col-sm col-12">
                    <input class="form-control" type="file" id="definition_file" name="definition_file">
                </div>
            </div>
            <div class="mt-3">
                {{ create_query('HED search query:') }}
            </div>
        </div>

        <label for="string_result" class="form-label">Results:</label>
        <textarea class="form-control" rows="5" cols="60" wrap="soft" maxlength="25000"
                      name="string_result" id="string_result"></textarea>
       
        {{ create_schemas_pulldown() }}
        {{ create_process_buttons('string_submit', 'string_clear', 'string_flash') }}
    </form>
    </form>
    <script type="module">
        {%  include 'js/constants.js' %}
        {%  include 'js/form-helpers.js' %}
        {%  include 'js/options.js' %}
        {%  include 'js/schemas-pulldown.js' %}
        {%  include 'js/strings-form.js' %}
    </script>
{% endblock %}

{% block widget_instructions %},
widgetInstructions: 'The user is on the HED Strings tools page for validating, converting (long/short form), and searching HED annotation strings.'
{% endblock %}