{% extends "!base.html" %}

{%- block scripts %}
  {{ super() }}
  
  <!-- OSA Chat Widget (HED Assistant)
       Privacy Note: This widget sends page content to an external AI service when
       allowPageContext is enabled. The widget provides contextual help for HEDTools documentation.
       Data sent: Page text content, user questions
       Service: OSA Chat Widget (osa-demo.pages.dev)
  -->
  <script>
    // Define config before the widget script loads
    window.osaChatConfig = {
      communityId: 'hed',
      title: 'HED Assistant',
      initialMessage: 'Hi! I can help with the HED online tools. What would you like to know?',
      placeholder: 'Questions about HED online tools?',
      suggestedQuestions: [
        'How do I create a BIDS JSON sidecar?',
        'How do I validate a HED string using the HED online tools?',
        'Explain the spreadsheet format for HED annotations.',
        'What online tools are available?'
      ],
      widgetInstructions: 'User is on the HED online tools documentation most likely looking for how to use these tools',
      showExperimentalBadge: true,
      allowPageContext: true,
      pageContextDefaultEnabled: true
    };
  </script>
  <script src="https://osa-demo.pages.dev/osa-chat-widget.js"
          crossorigin="anonymous"
          defer
          onload="window.OSAChatWidget && window.OSAChatWidget.setConfig(window.osaChatConfig)"></script>
{%- endblock scripts %}
